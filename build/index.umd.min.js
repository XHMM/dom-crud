!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports):"function"==typeof define&&define.amd?define(["exports"],r):r((e=e||self).crud={})}(this,function(e){"use strict";function r(e){var r="function"==typeof Symbol&&e[Symbol.iterator],t=0;return r?r.call(e):{next:function(){return e&&t>=e.length&&(e=void 0),{value:e&&e[t++],done:!e}}}}function t(e,r){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var n,o,i=t.call(e),c=[];try{for(;(void 0===r||r-- >0)&&!(n=i.next()).done;)c.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(o)throw o.error}}return c}function n(){for(var e=[],r=0;r<arguments.length;r++)e=e.concat(t(arguments[r]));return e}function o(e){var r=Object.prototype.toString.call(e).split(" ")[1];return r.slice(0,r.length-1).toLowerCase()}function i(e){return e.trim().split(" ").filter(function(e){return""!==e})}function c(e){var r=o(e);return"array"===r?e.every(function(e){return e instanceof Element}):"nodelist"===r||"htmlcollection"===r}function a(e){var r;if(e.includes("-=")){var t=e.indexOf("-=");r=[e.slice(0,t).trim(),e.slice(t+2).trim(),"-="]}else if(e.includes("+=")){t=e.indexOf("+=");r=[e.slice(0,t).trim(),e.slice(t+2).trim(),"+="]}else if(e.includes("=")){t=e.indexOf("=");r=[e.slice(0,t).trim(),e.slice(t+1).trim(),"="]}if(3!==r.length)throw new Error("options item not match key=val or key-=val or key+=val");return r}function l(e){var r=[];return Object.entries(e).map(function(e){e[0].endsWith("-")?r.push([e[0].slice(0,e[0].length-1),e[1],"-="]):e[0].endsWith("+")?r.push([e[0].slice(0,e[0].length-1),e[1],"+="]):r.push([e[0],e[1],"="])}),r}function u(e){var t,i,c=[];try{for(var u=r(e),s=u.next();!s.done;s=u.next()){var f=s.value;"string"==o(f)?c.push(a(f)):"object"==o(f)&&c.push.apply(c,n(l(f)))}}catch(e){t={error:e}}finally{try{s&&!s.done&&(i=u.return)&&i.call(u)}finally{if(t)throw t.error}}return c}Object.entries||(Object.entries=function(e){for(var r=Object.keys(e),t=r.length,n=new Array(t);t--;)n[t]=[r[t],e[r[t]]];return n});var s={doms:{"+=":{beforeScript:!1}},debug:!1},f={};function d(){f.log=function(){},f.warn=function(){},f.error=function(){}}var y=new Proxy(s,{set:function(e,r,t){return"debug"==r&&(0==t?d():(f.log=function(e,r){console.log("%c[dom-crud:log][%s]\n %c%s","color:#18b7ff;background:rgba(0,0,0,0.02);padding:0.2rem",e,"background:rgba(0,0,0,0.02);padding:0.2rem",r)},f.warn=function(e,r){console.log("%c[dom-crud:warn][%s]\n %c%s","color:orange;background:rgba(0,0,0,0.02);padding:0.2rem",e,"background:rgba(0,0,0,0.02);padding:0.2rem",r)},f.error=function(e,r){console.log("%c[dom-crud:error][%s]\n %c%s","color:red;background:rgba(0,0,0,0.02);padding:0.2rem",e,"background:rgba(0,0,0,0.02);padding:0.2rem",r)})),e[r]=t,!0}});function m(e,t,n){var o,i,a,l,u,s;if(void 0===n&&(n=""),!c(t))throw new TypeError("when key is 'doms', value should be array/array-like and from one of Element[], HTMLCollection, NodeList");if(n&&"script"===n){var f=e.querySelector("script");try{for(var d=r(t),y=d.next();!y.done;y=d.next()){var m=y.value;e.insertBefore(m,f)}}catch(e){o={error:e}}finally{try{y&&!y.done&&(i=d.return)&&i.call(d)}finally{if(o)throw o.error}}}else if(n&&n instanceof Element)try{for(var g=r(t),v=g.next();!v.done;v=g.next()){m=v.value;e.insertBefore(m,n)}}catch(e){a={error:e}}finally{try{v&&!v.done&&(l=g.return)&&l.call(g)}finally{if(a)throw a.error}}else try{for(var p=r(t),b=p.next();!b.done;b=p.next()){m=b.value;e.appendChild(m)}}catch(e){u={error:e}}finally{try{b&&!b.done&&(s=p.return)&&s.call(p)}finally{if(u)throw u.error}}}function g(e,r,t,n){"="==e&&r(),"+="==e&&t(),"-="==e&&n()}d(),e.cdom=function(e){for(var r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];var c=document.createElement(e);return u(r).map(function(e){var r,o=t(e,2),a=o[0],l=o[1];switch(a){case"class":(r=c.classList).add.apply(r,n(i(l.toString())));break;case"style":c.style.cssText=l.toString();break;case"text":c.textContent=l.toString();break;case"html":c.innerHTML+=l.toString();break;case"doms":m(c,l);break;default:c.setAttribute(a,l.toString())}}),c},e.ddom=function(e){return e instanceof Element?(e.remove(),!0):(f.warn("ddom","you passed an invalid parameter(type is "+o(e)+"), ddom removed nothing"),!1)},e.getCrudConfig=function(){return JSON.parse(JSON.stringify(y))},e.rdom=function(e){var r=document.querySelector(e);return r?(r.rdom=r.querySelector,r):null},e.rdoms=function(e){return document.querySelectorAll(e)},e.udom=function(e){for(var o=[],a=1;a<arguments.length;a++)o[a-1]=arguments[a];return u(o).map(function(o){var a=t(o,3),l=a[0],u=a[1],d=a[2];switch(l){case"class":g(d,function(){var r;e.className="",(r=e.classList).add.apply(r,n(i(u.toString())))},function(){var r;(r=e.classList).add.apply(r,n(i(u.toString())))},function(){var r;(r=e.classList).remove.apply(r,n(i(u.toString())))});break;case"style":g(d,function(){e.style.cssText=u.toString()},function(){e.style.cssText+=u.toString()},function(){u.toString().split(";").map(function(r){e.style.removeProperty(r)})});break;case"text":g(d,function(){e.textContent=u.toString()},function(){e.textContent+=u.toString()},function(){e.textContent=""});break;case"html":g(d,function(){e.innerHTML=u.toString()},function(){e.innerHTML+=u.toString()},function(){e.innerHTML=""});break;case"doms":g(d,function(){e.innerHTML="",m(e,u)},function(){!function(e){if(e in s&&s.hasOwnProperty(e))return s[e];throw new Error(e+" not exists in global curd config")}("doms")["+="].beforeScript?m(e,u):m(e,u,"script")},function(){!function(e,t){var n,o;if(!c(t))throw new TypeError("when key is 'doms', value should be array/array-like and from one of Element[], HTMLCollection, NodeList");try{for(var i=r(t),a=i.next();!a.done;a=i.next()){var l=a.value;l.parentNode==e?l.remove():f.warn("_removeDoms","encountered a dom that is not a child dom, removing skipped")}}catch(e){n={error:e}}finally{try{a&&!a.done&&(o=i.return)&&o.call(i)}finally{if(n)throw n.error}}}(e,u)});break;default:g(d,function(){e.setAttribute(l,u.toString())},function(){e.setAttribute(l,u.toString())},function(){e.removeAttribute(l)})}}),e},e.updateCrudConfig=function(e){var r=o(e);if("object"!==r)throw new TypeError("config should be an object, received type is "+r);!function e(r,t){var n=o(r),i=o(t);if("object"!==n||"object"!==i)throw new TypeError("target and source should both be object, received: target is "+n+", source is "+i);for(var c in t)if(t.hasOwnProperty(c)&&c in r){var a="object"==o(r[c]),l="object"==o(t[c]);l||a?a&&l&&e(r[c],t[c]):r[c]=t[c]}}(y,e)},Object.defineProperty(e,"__esModule",{value:!0})});

!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).crud={})}(this,function(t){"use strict";function e(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}function n(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}function r(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(n(arguments[e]));return t}function o(t){var e=Object.prototype.toString.call(t).split(" ")[1];return e.slice(0,e.length-1).toLowerCase()}function i(t){return t.trim().split(" ").filter(function(t){return""!==t})}function a(t){var e=o(t);return"array"===e||"nodelist"===e||"htmlcollection"===e}function c(t){var e=[];if(t.includes("-=")){var n=t.indexOf("-=");e=[t.slice(0,n).trim(),t.slice(n+2).trim(),"-="]}else if(t.includes("+=")){n=t.indexOf("+=");e=[t.slice(0,n).trim(),t.slice(n+2).trim(),"+="]}else if(t.includes("=")){n=t.indexOf("=");e=[t.slice(0,n).trim(),t.slice(n+1).trim(),"="]}if(3!==e.length)throw new Error("options item not match key=val or key-=val or key+=val");return e}function l(t){var e=[];return Object.entries(t).map(function(t){t[0].endsWith("-")?e.push([t[0].slice(0,t[0].length-1),t[1],"-="]):t[0].endsWith("+")?e.push([t[0].slice(0,t[0].length-1),t[1],"+="]):e.push([t[0],t[1],"="])}),e}function u(t){var n,i,a=[];try{for(var u=e(t),s=u.next();!s.done;s=u.next()){var f=s.value;"string"==o(f)?a.push(c(f)):"object"==o(f)&&a.push.apply(a,r(l(f)))}}catch(t){n={error:t}}finally{try{s&&!s.done&&(i=u.return)&&i.call(u)}finally{if(n)throw n.error}}return a}function s(t,n){var r,o;if(!a(n))throw new TypeError("when key is 'doms', value should be array/array-like and from one of Element[], HTMLCollection, NodeList");try{for(var i=e(n),c=i.next();!c.done;c=i.next()){var l=c.value;t.appendChild(l)}}catch(t){r={error:t}}finally{try{c&&!c.done&&(o=i.return)&&o.call(i)}finally{if(r)throw r.error}}}function f(t,e,n,r){"="==t&&e(),"+="==t&&n(),"-="==t&&r()}t.cdom=function(t){for(var e=[],o=1;o<arguments.length;o++)e[o-1]=arguments[o];var a=document.createElement(t);return u(e).map(function(t){var e,o=n(t,2),c=o[0],l=o[1];switch(c){case"class":(e=a.classList).add.apply(e,r(i(l.toString())));break;case"style":a.style.cssText=l.toString();break;case"text":a.textContent=l.toString();break;case"html":a.innerHTML+=l.toString();break;case"doms":s(a,l);break;default:a.setAttribute(c,l.toString())}}),a},t.rdom=function(t){var e=document.querySelector(t);return e.rdom=e.querySelector,e},t.udom=function(t){for(var o=[],c=1;c<arguments.length;c++)o[c-1]=arguments[c];return u(o).map(function(o){var c=n(o,3),l=c[0],u=c[1],d=c[2];switch(l){case"class":f(d,function(){var e;t.className="",(e=t.classList).add.apply(e,r(i(u.toString())))},function(){var e;(e=t.classList).add.apply(e,r(i(u.toString())))},function(){var e;(e=t.classList).remove.apply(e,r(i(u.toString())))});break;case"style":f(d,function(){t.style.cssText=u.toString()},function(){t.style.cssText+=u.toString()},function(){u.toString().split(";").map(function(e){t.style.removeProperty(e)})});break;case"text":f(d,function(){t.textContent=u.toString()},function(){t.textContent+=u.toString()},function(){t.textContent=""});break;case"html":f(d,function(){t.innerHTML=u.toString()},function(){t.innerHTML+=u.toString()},function(){t.innerHTML=""});break;case"doms":f(d,function(){t.innerHTML="",s(t,u)},function(){s(t,u)},function(){!function(t,n){var r,o;if(!a(n))throw new TypeError("when key is 'doms', value should be array/array-like and from one of Element[], HTMLCollection, NodeList");try{for(var i=e(n),c=i.next();!c.done;c=i.next()){var l=c.value;l.parentNode==t?l.remove():console.warn("encountered a dom that is not a child dom, removing skipped")}}catch(t){r={error:t}}finally{try{c&&!c.done&&(o=i.return)&&o.call(i)}finally{if(r)throw r.error}}}(t,u)});break;default:f(d,function(){t.setAttribute(l,u.toString())},function(){t.setAttribute(l,u.toString())},function(){t.removeAttribute(l)})}}),t},t.ddom=function(t){t.remove()},Object.defineProperty(t,"__esModule",{value:!0})});

function r(r){var t="function"==typeof Symbol&&r[Symbol.iterator],n=0;return t?t.call(r):{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}}}function t(r,t){var n="function"==typeof Symbol&&r[Symbol.iterator];if(!n)return r;var e,o,i=n.call(r),a=[];try{for(;(void 0===t||t-- >0)&&!(e=i.next()).done;)a.push(e.value)}catch(r){o={error:r}}finally{try{e&&!e.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}function n(){for(var r=[],n=0;n<arguments.length;n++)r=r.concat(t(arguments[n]));return r}function e(r){var t=Object.prototype.toString.call(r).split(" ")[1];return t.slice(0,t.length-1).toLowerCase()}function o(r){return r.trim().split(" ").filter(function(r){return""!==r})}function i(r){var t=e(r);return"array"===t?r.every(function(r){return r instanceof Element}):"nodelist"===t||"htmlcollection"===t}function a(r){var t,n="";if(r.includes("-=")?n="-=":r.includes("+=")?n="+=":r.includes("==")&&(n="=="),n){var e=r.indexOf(n),o=r.slice(0,e).trim(),i=l(r.slice(e+2));if(4!==(t=[o,i.v,n,i.c]).length)throw new Error("options item format not correct");return t}throw new Error("options item format not correct")}function c(r){var t=[];try{return Object.entries(r).map(function(r){var n=r[0],o=r[1],i="";if(n.endsWith("-=")?i="-=":n.endsWith("+=")?i="+=":n.endsWith("==")&&(i="=="),!i)throw new Error("options item format not correct");var a=n.match(/.+(?=[-+=]=)/)[0],c=void 0,u=void 0,f=e(o);if("string"===f){var s=l(o);c=s.v,u=s.c}else if("object"===f){if(!o.value)throw new Error("options item format not correct");c=o.value,u=o.config||{}}else c=o,u={};t.push([a,c,i,u])}),t}catch(r){throw r}}function l(r){var t="",n={},e=r.trim().match(/(.*)\?([0-9a-zA-Z&=]*)/);return null===e?t=r:e&&3===e.length&&(t=e[1],n=e[2].split("&").reduce(function(r,t){var n=t.split("=");return"true"===n[1]?!0:"false"===n[1]?!1:n[1].match(/[0-9]+/g)?+n[1]:r[n[0]]=n[1],r},{})),{v:t,c:n}}function u(t){var o,i,l=[];try{for(var u=r(t),f=u.next();!f.done;f=u.next()){var s=f.value;"string"==e(s)?l.push(a(s)):"object"==e(s)&&l.push.apply(l,n(c(s)))}}catch(r){o={error:r}}finally{try{f&&!f.done&&(i=u.return)&&i.call(u)}finally{if(o)throw o.error}}return l}var f={log:function(){},warn:function(){},error:function(){}};function s(){f.log=function(){},f.warn=function(){},f.error=function(){}}s();var d={text:{pureText:!1},debug:!1},v=new Proxy(d,{set:function(r,t,n){return"debug"==t&&(!1===n&&s(),!0===n&&(f.log=function(r,t){console.log("%c[dom-crud:log][%s]\n %c%s","color:#18b7ff;background:rgba(0,0,0,0.02);padding:0.2rem",r,"background:rgba(0,0,0,0.02);padding:0.2rem",t)},f.warn=function(r,t){console.log("%c[dom-crud:warn][%s]\n %c%s","color:orange;background:rgba(0,0,0,0.02);padding:0.2rem",r,"background:rgba(0,0,0,0.02);padding:0.2rem",t)},f.error=function(r,t){console.log("%c[dom-crud:error][%s]\n %c%s","color:red;background:rgba(0,0,0,0.02);padding:0.2rem",r,"background:rgba(0,0,0,0.02);padding:0.2rem",t)})),r[t]=n,!0}});function g(){return JSON.parse(JSON.stringify(v))}function m(r){var t=e(r);if("object"!==t)throw new TypeError("config should be an object, received type is "+t);!function r(t,n){var o=e(t),i=e(n);if("object"!==o||"object"!==i)throw new TypeError("target and source should both be object, received: target is "+o+", source is "+i);for(var a in n)if(n.hasOwnProperty(a)&&a in t){var c="object"==e(t[a]),l="object"==e(n[a]);l||c?c&&l&&r(t[a],n[a]):t[a]=n[a]}}(v,r)}function y(r){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var a=document.createElement(r);return u(e).map(function(r){var e,i=t(r,2),c=i[0],l=i[1];switch(c){case"class":(e=a.classList).add.apply(e,n(o(l.toString())));break;case"style":a.style.cssText=l.toString();break;case"text":a.textContent=l.toString();break;case"html":a.innerHTML=l.toString();break;case"doms":x(a,l,null);break;default:a.setAttribute(c,l.toString())}}),a}function h(r){var t=document.querySelector(r);return t?(t.rdom=t.querySelector,t):null}function p(r){return document.querySelectorAll(r)}function b(e){for(var a=[],c=1;c<arguments.length;c++)a[c-1]=arguments[c];u(a).map(function(a){var c=t(a,4),l=c[0],u=c[1],s=c[2],v=c[3];switch(l){case"class":S(s,function(){var r;e.className="",(r=e.classList).add.apply(r,n(o(u.toString())))},function(){var r;(r=e.classList).add.apply(r,n(o(u.toString())))},function(){var r;(r=e.classList).remove.apply(r,n(o(u.toString())))});break;case"style":S(s,function(){e.style.cssText=u.toString()},function(){e.style.cssText+=u.toString()},function(){u.toString().split(";").map(function(r){e.style.removeProperty(r)})});break;case"text":var g="pureTex"in v?v.pureText:function(r){if(r in d&&d.hasOwnProperty(r))return d[r];throw new Error(r+" not exists in global crud config")}("text").pureText;S(s,function(){g?e.firstChild.data=u.toString():e.textContent=u.toString()},function(){g?e.firstChild.data+=u.toString():e.textContent+=u.toString()},function(){g?e.firstChild.data="":e.textContent=""});break;case"html":S(s,function(){e.innerHTML=u.toString()},function(){e.innerHTML+=u.toString()},function(){e.innerHTML=""});break;case"doms":S(s,function(){e.innerHTML="",x(e,u,null)},function(){x(e,u,v.before||null)},function(){!function(t,n){var e,o;if(!i(n))throw new TypeError("when key is 'doms', value should be array/array-like and from one of Element[], HTMLCollection, NodeList");try{for(var a=r(n),c=a.next();!c.done;c=a.next()){var l=c.value;l.parentNode==t?l.remove():f.warn("_removeDoms","encountered a dom that is not a child dom, removing skipped")}}catch(r){e={error:r}}finally{try{c&&!c.done&&(o=a.return)&&o.call(a)}finally{if(e)throw e.error}}}(e,u)});break;default:S(s,function(){e.setAttribute(l,u.toString())},function(){e.setAttribute(l,u.toString())},function(){e.removeAttribute(l)})}})}function w(r){return r instanceof Element?(r.remove(),!0):(f.warn("ddom","you passed an invalid parameter(type is "+e(r)+"), ddom removed nothing"),!1)}function x(t,n,e){var o,a,c,l;if(!i(n))throw new TypeError("when key is 'doms', value should be array/array-like and from one of Element[], HTMLCollection, NodeList");if(e&&e instanceof Element){if(!t.contains(e))throw new Error("beForeElement not exist in containerElement");try{for(var u=r(n),f=u.next();!f.done;f=u.next()){var s=f.value;t.insertBefore(s,e)}}catch(r){o={error:r}}finally{try{f&&!f.done&&(a=u.return)&&a.call(u)}finally{if(o)throw o.error}}}else try{for(var d=r(n),v=d.next();!v.done;v=d.next()){s=v.value;t.appendChild(s)}}catch(r){c={error:r}}finally{try{v&&!v.done&&(l=d.return)&&l.call(d)}finally{if(c)throw c.error}}}function S(r,t,n,e){"=="==r&&t(),"+="==r&&n(),"-="==r&&e()}export{y as cdom,w as ddom,g as getCrudConfig,h as rdom,p as rdoms,b as udom,m as updateCrudConfig};
